---
title: Next Plan
date: 2025-04-05
author: toshio
tags: 
---

Canistorageは分散型ストレージというコンセプトであるので、基本的にはデータ独立性のため、ストレージ単体のCanisterとしてデプロイすることを想定している。データを管理する以外の機能は、適切なアクセス制御の下、外部のアプリケーション側で実装する仕組みを考えている。

一方、小規模のアプリケーションなど分散ストレージと統合した形で、Crateとして取り込みが容易なようにしておくことも有効かもしれない。

また、現バージョンではファイル情報をファイルに保持している点で非効率なため、[stable-fs](https://github.com/wasm-forge/stable-fs)と同じ層かそのすぐ上層に実装し、ファイルシステムの機能として利用しやすくする必要がある。

## Storageの想定するディレクトリ構造

個人のデータを管理するためのディレクトリ構造はどうあるべきか。

約30年近く自分のデータを管理してきて、落ち着いたのは以下のようなディレクトリ構造。どこまでこうした仕様を決めるべきなのかの整理が必要。

### Photo directories

```
/photo/<yyyy>/<yyyy>-<MM>-<dd>_<label>/
```

### Video directories

```
/video/<yyyy>/<yyyy>-<MM>-<dd>_<label>/
```

### Document directories

```
/document/<yyyy>/
```

### User directories

```
/<user>/
```

このディレクトリにどう格納するかは未規定。

## 外部アプリケーションのデータアクセス

外部アプリケーションとのデータ連携はどうあるべきか。

たとえば、Android端末では、アプリケーションのパッケージごとに独立したディレクトリが用意され、一時的なデータはこのサンドボックス領域で管理されている。

そして、画像や動画などデータの保存や参照はAPIを通じて行う仕様となっている。

Android端末の内部ストレージのようなものを分散型ストレージとしてインターネット上に置いておくイメージになるのか。

アプリケーションのパッケージ名の代わりにPrincipalごとに独立したデータディレクトリを用意する？
